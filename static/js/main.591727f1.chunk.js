(this.webpackJsonpmoney_note=this.webpackJsonpmoney_note||[]).push([[0],{38:function(e,t,n){e.exports=n(69)},43:function(e,t,n){},56:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(26),o=n.n(c),l=(n(43),n(44),n(45),n(46),n(27)),i=n(2),u="set user",s={nickName:"",email:"",isLogin:!1},m=n(31),p="set users",f=[],d="show white popup and set content",b="hide white popup and clear content",g={isShow:!1,type:"content",title:"",titleColor:"black",content:"",contentColor:"black",defaultButton:{type:"close",clickHandle:null,color:"#bae1ff"},buttonGroups:[]},h="set pageInfo",v="set pageInfo leftSideMenu",E={isLoading:!1,leftSideMenuInfo:{show:!1}},y=Object(l.b)(Object(l.a)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(i.a)(Object(i.a)({},e),t.value);default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return[].concat(Object(m.a)(e),Object(m.a)(t.value));default:return e}},whitePop:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(i.a)(Object(i.a)({},g),{},{isShow:!0},t.value);case b:return Object(i.a)({},g);default:return e}},pageInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(i.a)(Object(i.a)({},e),t.value);case v:return Object(i.a)(Object(i.a)({},e),{},{leftSideMenuInfo:Object(i.a)({},t.value)});default:return e}}})),w=n(8);var k=function(e){return r.a.createElement(w.a.Provider,{value:y},e.children)},j=n(5),O=n.n(j),C=n(11),x=n(13),N=n(10),I=n(3),B=n(17),S=n.n(B);n(49),n(51);S.a.initializeApp({apiKey:"AIzaSyBLwOpH5VcTHxMvViFpd3Jdukx9FJCoqrE",authDomain:"silvermoney-c0a9b.firebaseapp.com",databaseURL:"https://silvermoney-c0a9b.firebaseio.com",projectId:"silvermoney-c0a9b",storageBucket:"silvermoney-c0a9b.appspot.com",messagingSenderId:"893386586316",appId:"1:893386586316:web:5dd91e591a6cf426fc2a69",measurementId:"G-VCXVRB3QEL"});var L=S.a.auth(),P=S.a.firestore(),T=(S.a,y.dispatch),R=function(e){return T({type:h,value:{isLoading:e}})},D=function(){return T({type:v,value:{show:!0}})},M=function(){return T({type:v,value:{show:!1}})},A=y.dispatch,Y=function(e){A({type:d,value:e})},H={type:{title:"title",content:"content",titleContent:"title - content"},actionType:{logout:"logout",reloadPage:"reloadPage",toMainPage:"redirect to mainPage",close:"close",custom:"custom"}},F=y.dispatch,z=function(){var e=Object(C.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,P.collection("users").doc(t).get();case 5:return n=e.sent,console.log(n.data()),e.abrupt("return",Object(i.a)({uid:t},n.data()));case 10:e.prev=10,e.t0=e.catch(2),console.error("Error fetching user",e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(C.a)(O.a.mark((function e(t,n){var a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return a=P.collection("users").doc(t.uid),e.next=5,a.get();case 5:if(e.sent.exists){e.next=16;break}return r=t.email,e.prev=8,e.next=11,a.set(Object(i.a)({email:r},n));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(8),console.error("Error creating user document",e.t0);case 16:return e.abrupt("return",z(t.uid));case 17:case"end":return e.stop()}}),e,null,[[8,13]])})));return function(t,n){return e.apply(this,arguments)}}(),J=function(){var e=Object(C.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),e.abrupt("return",L.signInWithEmailAndPassword(t,n).then((function(e){return G(e.user).then((function(e){return e&&F({type:u,value:{email:e.email,nickName:e.nickName,isLogin:!0}}),!0}))})).catch((function(e){R(!1),Y({content:"Error signing in with password and email!"}),console.error("Error signing in with password and email",e)})).finally((function(){R(!1)})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),V=(n(54),n(55),n(56),n(1)),_=function(e){var t=e.Left,n=e.Center;return r.a.createElement(r.a.Fragment,null,r.a.createElement(V.Toolbar,null,r.a.createElement("div",{className:"left"},t||r.a.createElement(V.ToolbarButton,{onClick:D},r.a.createElement(V.Icon,{icon:"align-justify"}))),r.a.createElement("div",{className:"center"},n||"Money Note"),r.a.createElement("div",{className:"right"},r.a.createElement(N.b,{to:"/changelog"},r.a.createElement(V.ToolbarButton,null,r.a.createElement(V.Icon,{icon:"question-circle"}))))))},W=function(){return r.a.createElement(V.Page,{className:"sign-page",modifier:"material",renderToolbar:function(){return r.a.createElement(_,null)}},r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(V.Icon,{size:200,icon:"fa-grav",style:{color:"#9cbddb"},"fixed-width":!0})),r.a.createElement("p",{style:{textAlign:"center"}},"Loading..."))},q=(n(64),function(e){var t=Object(a.useState)(e),n=Object(x.a)(t,2),r=n[0],c=n[1];return{value:r,onChange:Object(a.useCallback)((function(e){c(e.currentTarget.value)}),[])}}),K=function(){var e=r.a.createElement(N.b,{to:"/changelog"},r.a.createElement(V.ToolbarButton,null,r.a.createElement(V.Icon,{icon:"md-menu"})));return r.a.createElement(_,{Right:e})},Q=function(){var e=q(""),t=q("");return r.a.createElement(V.Page,{className:"sign-page",modifier:"material",renderToolbar:function(){return r.a.createElement(K,null)},contentStyle:{backgroundColor:"white"}},r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(V.Icon,{size:200,icon:"fa-grav",style:{color:"#9cbddb"},"fixed-width":!0})),r.a.createElement("div",{style:{padding:"0 10%"}},r.a.createElement("div",null,r.a.createElement(V.Input,Object.assign({float:!0,style:{width:"100%"},modifier:"material"},e,{placeholder:"\u5e33\u865f"}))),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(V.Input,Object.assign({float:!0,type:"password",style:{width:"100%"},modifier:"material"},t,{placeholder:"\u5bc6\u78bc"}))),r.a.createElement("br",null),r.a.createElement(V.Button,{modifier:"large--cta",onClick:function(n){n.preventDefault(),J(e.value,t.value)}},"\u767b\u5165")))},U=(n(65),function(e){var t=r.a.createElement(V.BackButton,{onClick:function(){e.history.push("/")}},"Back"),n=r.a.createElement(N.b,{to:"/changelog"},r.a.createElement(V.ToolbarButton,null,r.a.createElement(V.Icon,{icon:"md-menu"})));return r.a.createElement(_,{Left:t,Center:"\u66f4\u65b0\u8a0a\u606f",Right:n})}),X=function(e){return r.a.createElement(V.Page,{className:"sign-page",modifier:"material",renderToolbar:function(){return r.a.createElement(U,e)},contentStyle:{backgroundColor:"white"}},"ChangeLog...")},$=n(20),Z=(n(66),function(e){var t=r.a.createElement(N.b,{to:"/changelog"},r.a.createElement(V.ToolbarButton,null,r.a.createElement(V.Icon,{icon:"md-menu"})));return r.a.createElement(_,{Right:t})}),ee=n(18),te=n.n(ee),ne=function(e){var t=Object(w.b)(Object(a.useCallback)((function(e){return{user:e.user,users:e.users}}),[])),n=t.user,c=t.users,o=q("0"),l=q(te()(new Date).format("YYYY-MM-DD")),u=q(""),s=Object(a.useState)(n.email),m=Object(x.a)(s,2),p=m[0],f=m[1],d=Object(a.useState)({}),b=Object(x.a)(d,2),g=b[0],h=b[1];console.log("costBelongs",g);var v=function(){var e=Object(C.a)(O.a.mark((function e(t){var n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),R(!0),n=new Date,a=P.collection("costData").doc(te()(n).format("YYYY")).collection("costDataMonth").doc(te()(n).format("MM")).collection("costDataDay").doc(te()(n).format("DD")).collection("data"),e.next=6,a.add({cost:Number(o.value),toCost:c.filter((function(e){return e.email===p})).map((function(e){return e.email})).join(""),costBelongs:c.filter((function(e){return!g[e.email]})).map((function(e){return e.email})),remark:u.value,createdAt:(new Date).getTime()});case 6:e.sent,R(!1),Y({type:H.type.titleContent,title:"\u65b0\u589e\u6210\u529f",content:["\u50f9\u683c:<br/>"+o.value,"\u65e5\u671f:<br/>"+l.value,"\u8ab0\u82b1\u9322:<br/>"+c.filter((function(e){return e.email===p})).map((function(e){return e.nickName})),"\u5c6c\u65bc\u8ab0:<br/>"+c.filter((function(e){return!g[e.email]})).map((function(e){return e.nickName})).join(" \\ "),"\u5099\u8a3b:<br/>"+u.value].join("<br/>.....<br/>")});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(V.Page,{className:"createManagement-page",modifier:"material",renderToolbar:function(){return r.a.createElement(Z,null)},contentStyle:{padding:"1rem 1rem"}},r.a.createElement("h2",null,"Hello, ",n.nickName),r.a.createElement(V.Row,{style:{marginBottom:"1.5rem"}},r.a.createElement(V.Col,{width:"30%",className:"inputLabel"},"\u50f9\u683c :"),r.a.createElement(V.Col,null,r.a.createElement(V.Input,Object.assign({style:{width:"90%"},className:"textInput textInputRight"},o,{type:"number",modifier:"transparent"})))),r.a.createElement(V.Row,{style:{marginBottom:"1.5rem"}},r.a.createElement(V.Col,{width:"30%",className:"inputLabel"},"\u65e5\u671f :"),r.a.createElement(V.Col,null,r.a.createElement(V.Input,Object.assign({style:{width:"90%"},className:"textInput"},l,{type:"date",modifier:"transparent"})))),r.a.createElement(V.Row,{style:{marginBottom:"1.5rem"}},r.a.createElement(V.Col,{width:"30%",className:"inputLabel"},"\u51fa\u9322\u8005 :"),r.a.createElement(V.Col,null,r.a.createElement(V.Row,null,c.map((function(e,t){return r.a.createElement(V.Col,{key:"toCost-"+t,width:"50%",className:"center"},r.a.createElement(V.Radio,{value:e.email,name:"toCost",onChange:function(e){f(e.target.value)},checked:p===e.email,style:{marginRight:".4rem"},inputId:"toCost-"+t,modifier:"material"}),r.a.createElement("label",{style:{marginRight:".4rem"},htmlFor:"toCost-"+t},e.nickName))}))))),r.a.createElement(V.Row,{style:{marginBottom:"1.5rem"}},r.a.createElement(V.Col,{width:"30%",className:"inputLabel"},"\u5c6c\u65bc\u8ab0 :"),r.a.createElement(V.Col,null,r.a.createElement(V.Row,null,c.map((function(e,t){return r.a.createElement(V.Col,{key:"costBelongs-"+t,width:"50%",className:"center"},r.a.createElement(V.Checkbox,{checked:!g[e.email],onChange:function(e){h((function(t){return Object(i.a)(Object(i.a)({},t),{},Object($.a)({},e.target.value,!t[e.target.value]))}))},style:{marginRight:".4rem"},value:e.email,inputId:"costBelongs-"+t,modifier:"material"}),r.a.createElement("label",{style:{marginRight:".4rem"},htmlFor:"costBelongs-"+t},e.nickName))}))))),r.a.createElement(V.Row,{style:{marginBottom:"1.5rem"}},r.a.createElement(V.Col,{width:"30%",className:"inputLabel"},"\u5099\u8a3b :"),r.a.createElement(V.Col,null,r.a.createElement("textarea",Object.assign({},u,{className:"textarea",rows:"3",placeholder:"\u8acb\u9ede\u64ca\u8f38\u5165"})))),r.a.createElement(V.Button,{modifier:"large--cta",onClick:v},"\u9001\u51fa"))},ae=[r.a.createElement(I.a,{key:"route-1",path:"/",exact:!0,component:function(){return Object(w.b)(Object(a.useCallback)((function(e){return e.user}),[])).isLogin?r.a.createElement(ne,null):r.a.createElement(Q,null)}}),r.a.createElement(I.a,{key:"route-2",path:"/changelog",component:X})];var re=function(e){var t=Object(w.b)(Object(a.useCallback)((function(e){return e.pageInfo.leftSideMenuInfo.show}),[]));return r.a.createElement(V.Splitter,null,r.a.createElement(V.SplitterSide,{style:{boxShadow:"0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23)"},side:"left",width:200,isOpen:t,collapse:!0,swipeable:!0,onClose:M},r.a.createElement(V.Page,null," Page Left ")),r.a.createElement(V.SplitterContent,null,e.children))},ce=y.dispatch,oe=function(){var e=Object(C.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.collection("users").get();case 3:return t=e.sent,n=[],t.forEach((function(e){n.push(e.data())})),e.abrupt("return",n);case 9:return e.prev=9,e.t0=e.catch(0),console.error("Error fetching users",e.t0),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();var le=function(){var e=Object(a.useState)(!0),t=Object(x.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){L.onAuthStateChanged(function(){var e=Object(C.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t,G(n).then((function(e){e&&F({type:u,value:{email:e.email,nickName:e.nickName,isLogin:!0}})}))).then((function(){c(!1)}));case 1:case"end":return e.stop()}var n}),e)})));return function(t){return e.apply(this,arguments)}}()),oe().then((function(e){ce({type:p,value:e})}))}),[]),r.a.createElement(N.a,null,n?r.a.createElement(W,null):r.a.createElement(re,null,r.a.createElement(I.c,null,ae)))},ie=(n(68),function(){var e=Object(w.b)(Object(a.useCallback)((function(e){return e.whitePop}),[])),t=e.isShow,n=e.type,c=e.title,o=e.titleColor,l=e.content,u=e.contentColor,s=e.defaultButton,m=e.buttonGroups,p=o?{color:o}:{},f=u?{color:u}:{},d=function(e){e&&(e.preventDefault(),e.stopPropagation()),A({type:b})},g=function(e,t){switch(e.preventDefault(),e.stopPropagation(),t.actionType){case H.actionType.logout:return void d();case H.actionType.reloadPage:return void window.location.reload(!1);case H.actionType.toMainPage:case H.actionType.close:return void d();case H.actionType.custom:return void("function"===typeof t.clickHandle?t.clickHandle(d):d());default:return}};return r.a.createElement(V.AlertDialog,{isOpen:t,isCancelable:!1,className:"whitePop"},r.a.createElement("div",{className:"alert-dialog-title",style:Object(i.a)({},p)},[H.type.title,H.type.titleContent].includes(n)&&c&&c.toString().split("<br/>").map((function(e,t){return r.a.createElement("p",{key:"whitePop-title_"+t},e)}))),[H.type.content,H.type.titleContent].includes(n)&&r.a.createElement("div",{className:"alert-dialog-content",style:Object(i.a)({},f)},l&&l.toString().split("<br/>").map((function(e,t){return r.a.createElement("p",{key:"whitePop-content_"+t},e)}))),r.a.createElement("div",{className:"alert-dialog-footer"},m&&m.length?m.map((function(e,t){return r.a.createElement("div",{className:"btn-block",key:"buttonGroup"+t},e.map((function(e,t){var n=e.color?{color:e.color}:{};return r.a.createElement("div",{key:"button"+t,className:"btn",style:n,onClick:function(t){return g(t,e)}},e.text?e.text:"\u6211\u77e5\u9053\u4e86")})))})):r.a.createElement(V.Button,{onClick:function(e){return g(e,{actionType:s.type})},className:"alert-dialog-button"},"\u6211\u77e5\u9053\u4e86")))}),ue=function(){return Object(w.b)(Object(a.useCallback)((function(e){return e.pageInfo.isLoading}),[]))&&r.a.createElement(V.Modal,{isOpen:!0}," ",r.a.createElement(V.Icon,{spin:!0,icon:"spinner"})," Loading ...")};var se=function(){return r.a.createElement(k,null,r.a.createElement(le,null),r.a.createElement(ie,null),r.a.createElement(ue,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(se,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[38,1,2]]]);