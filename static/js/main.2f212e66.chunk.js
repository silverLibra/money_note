(this.webpackJsonpmoney_note=this.webpackJsonpmoney_note||[]).push([[0],{28:function(e,t,n){e.exports=n(54)},33:function(e,t,n){},51:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(16),u=n.n(c),o=(n(33),n(34),n(35),n(36),n(17)),i=n(7),l="set user",s={nickName:"",email:"",isLogin:!1},m=Object(o.b)(Object(o.a)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(i.a)(Object(i.a)({},e),t.value);default:return e}}})),p=n(11);var f=function(e){return a.a.createElement(p.a.Provider,{value:m},e.children)},d=n(2),h=n.n(d),b=n(5),v=n(6),E=n(27),g=n(9),w=n.n(g);n(39),n(41);w.a.initializeApp({apiKey:"AIzaSyBLwOpH5VcTHxMvViFpd3Jdukx9FJCoqrE",authDomain:"silvermoney-c0a9b.firebaseapp.com",databaseURL:"https://silvermoney-c0a9b.firebaseio.com",projectId:"silvermoney-c0a9b",storageBucket:"silvermoney-c0a9b.appspot.com",messagingSenderId:"893386586316",appId:"1:893386586316:web:5dd91e591a6cf426fc2a69",measurementId:"G-VCXVRB3QEL"});var O=w.a.auth(),j=w.a.firestore(),y=w.a,k=m.dispatch,x=function(){var e=Object(b.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,j.collection("users").doc(t).get();case 5:return n=e.sent,e.abrupt("return",Object(i.a)({uid:t},n.data()));case 9:e.prev=9,e.t0=e.catch(2),console.error("Error fetching user",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(b.a)(h.a.mark((function e(t,n){var r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return r=j.collection("users").doc(t.uid),e.next=5,r.get();case 5:if(e.sent.exists){e.next=16;break}return a=t.email,e.prev=8,e.next=11,r.set(Object(i.a)({email:a},n));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(8),console.error("Error creating user document",e.t0);case 16:return e.abrupt("return",x(t.uid));case 17:case"end":return e.stop()}}),e,null,[[8,13]])})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",S(t).then((function(e){e&&k({type:l,value:{email:e.email,isLogin:!0}})})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=n(8),L=function(){var e=Object(r.useState)(""),t=Object(v.a)(e,2),n=t[0],c=t[1],u=Object(r.useState)(""),o=Object(v.a)(u,2),i=o[0],l=o[1],s=Object(r.useState)(null),m=Object(v.a)(s,2),p=m[0],f=m[1],d=function(e,t){var n=e.currentTarget.value;"userEmail"===t?c(n):"userPassword"===t&&l(n)};return a.a.createElement(C.Page,{renderToolbar:function(){return a.a.createElement(C.Toolbar,null,a.a.createElement("div",{className:"center"},"\u767b\u5165\u9801\u9762"))},contentStyle:{padding:"20%"}},null!==p&&a.a.createElement("div",{className:"py-4 bg-red-600 w-full text-white text-center mb-3"},p),a.a.createElement("div",null,a.a.createElement(C.Input,{float:!0,style:{width:"100%"},modifier:"material",value:n,onChange:function(e){return d(e,"userEmail")},placeholder:"\u5e33\u865f"})),a.a.createElement("br",null),a.a.createElement("div",null,a.a.createElement(C.Input,{float:!0,style:{width:"100%"},modifier:"material",value:i,onChange:function(e){return d(e,"userPassword")},placeholder:"\u5bc6\u78bc"})),a.a.createElement("br",null),a.a.createElement(C.Button,{modifier:"large--cta",onClick:function(e){e.preventDefault(),O.setPersistence(y.auth.Auth.Persistence.SESSION).then((function(){O.signInWithEmailAndPassword(n,i).then((function(e){I(e.user)})).catch((function(e){f("Error signing in with password and email!"),console.error("Error signing in with password and email",e)}))}))}},"\u767b\u5165"))};n(49),n(50),n(51);var P=function(){var e=Object(p.b)(Object(r.useCallback)((function(e){return e.user}),[])),t=Object(r.useState)(!0),n=Object(v.a)(t,2),c=n[0],u=n[1];return Object(r.useEffect)((function(){O.onAuthStateChanged(function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I(t).then((function(){u(!1)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),c?a.a.createElement("p",null,"Loading"):e.isLogin?a.a.createElement(a.a.Fragment,null,a.a.createElement("h1",null,"Hello"),a.a.createElement("p",null,e.email)):a.a.createElement(E.a,null,a.a.createElement(L,{path:"/"}))};var B=function(){return a.a.createElement(f,null,a.a.createElement(P,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[28,1,2]]]);